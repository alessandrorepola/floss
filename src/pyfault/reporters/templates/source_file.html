<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }}</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>{{ title }}</h1>
            <p class="subtitle">{{ file_path }}</p>
        </header>
        
        <nav>
            <a href="../index.html">‚Üê Back to Summary</a>
            <a href="../package_overview.html">Package Overview</a>
        </nav>
        
        <section class="source-viewer">
            <h2>Source Code</h2>
            <div class="source-code">
                {% for line in lines %}
                <div class="source-line {{ line.suspicion_level }}" id="line-{{ line.number }}">
                    <span class="line-number">{{ line.number }}</span>{{ line.content }}
                    {% if line.scores %}
                    <div class="line-scores" style="margin-left: 75px; font-size: 0.8em; color: #6c757d;">
                        {% for score in line.scores %}
                        <span class="score-badge {{ 'very-high' if score.score >= 0.8 else 'high' if score.score >= 0.6 else 'medium' if score.score >= 0.3 else 'low' if score.score > 0 else 'none' }}">
                            {{ score.formula_name }}: {{ "%.4f"|format(score.score) }}
                        </span>
                        {% endfor %}
                    </div>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </section>
        
        <section class="element-details">
            <h2>Suspicious Elements in this File</h2>
            <table class="ranking-table">
                <thead>
                    <tr>
                        <th>Line</th>
                        <th>Element Type</th>
                        <th>Formula</th>
                        <th>Score</th>
                        <th>Rank</th>
                    </tr>
                </thead>
                <tbody>
                    {% for score in element_scores %}
                    <tr>
                        <td><a href="#line-{{ score.element.line_number }}" onclick="highlightSourceLine('{{ score.element.line_number }}')">{{ score.element.line_number }}</a></td>
                        <td>{{ score.element.element_type }}</td>
                        <td>{{ score.formula_name }}</td>
                        <td>
                            <span class="score-badge {{ 'very-high' if score.score >= 0.8 else 'high' if score.score >= 0.6 else 'medium' if score.score >= 0.3 else 'low' if score.score > 0 else 'none' }}">
                                {{ "%.6f"|format(score.score) }}
                            </span>
                        </td>
                        <td>{{ score.rank }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </section>
    </div>
    <script src="../script.js"></script>
</body>
</html>